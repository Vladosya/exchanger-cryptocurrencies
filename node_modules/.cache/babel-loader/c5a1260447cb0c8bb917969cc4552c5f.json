{"ast":null,"code":"import _regeneratorRuntime from \"C:/Job/work/365-change/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"C:/Job/work/365-change/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { required, email } from \"vuelidate/lib/validators\";\nexport default {\n  name: \"recovery-view\",\n  data: function data() {\n    return {\n      formRecovery: {\n        email: \"\"\n      },\n      isDisabledBtnSubmit: false,\n      popupOptions: {\n        recoveryResult: \"\",\n        popupInfo: false,\n        popupText: \"\",\n        popupBtn: \"\"\n      }\n    };\n  },\n  methods: {\n    status: function status(validation) {\n      return {\n        \"is-invalid\": validation.$error\n      };\n    },\n    recoverySubmitForm: function recoverySubmitForm() {\n      var _this = this;\n\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n        var formData, resultRecovery;\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _this.$v.$touch();\n\n                if (!_this.$v.$invalid) {\n                  _context.next = 5;\n                  break;\n                }\n\n                console.log(\"Error\");\n                _context.next = 11;\n                break;\n\n              case 5:\n                _this.isDisabledBtnSubmit = true;\n                formData = {\n                  email: _this.formRecovery.email\n                };\n                _context.next = 9;\n                return _this.$store.dispatch(\"recovery\", formData);\n\n              case 9:\n                resultRecovery = _context.sent;\n\n                if (resultRecovery.message === \"Успешное восстановление пароля\") {\n                  _this.popupOptions.recoveryResult = resultRecovery.message;\n                  _this.popupOptions.popupInfo = true;\n                  _this.popupOptions.popupText = \"\\u041D\\u0430 \\u0432\\u0430\\u0448\\u0443 \\u043F\\u043E\\u0447\\u0442\\u0443 \".concat(_this.formRecovery.email, \" \\u043E\\u0442\\u043F\\u0440\\u0430\\u0432\\u043B\\u0435\\u043D \\u043D\\u043E\\u0432\\u044B\\u0439 \\u043F\\u0430\\u0440\\u043E\\u043B\\u044C\");\n                  _this.popupOptions.popupBtn = \"Продолжить\";\n                  _this.isDisabledBtnSubmit = false;\n                } else if (resultRecovery.message === \"Пользователь с данным email не найден\") {\n                  _this.popupOptions.recoveryResult = resultRecovery.message;\n                  _this.popupOptions.popupInfo = true;\n                  _this.popupOptions.popupText = \"\\u041F\\u043E\\u043B\\u044C\\u0437\\u043E\\u0432\\u0430\\u0442\\u0435\\u043B\\u044C \\u0441 \\u0434\\u0430\\u043D\\u043D\\u044B\\u043C \".concat(_this.formRecovery.email, \" \\u043D\\u0435 \\u043D\\u0430\\u0439\\u0434\\u0435\\u043D\");\n                  _this.popupOptions.popupBtn = \"Попробовать ещё раз\";\n                  _this.isDisabledBtnSubmit = false;\n                }\n\n              case 11:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }))();\n    },\n    goAfterRecovery: function goAfterRecovery() {\n      if (this.popupOptions.recoveryResult === \"Успешное восстановление пароля\") {\n        this.$router.push(\"/login\");\n        this.popupOptions.popupInfo = false;\n      } else if (this.popupOptions.recoveryResult === \"Пользователь с данным email не найден\") {\n        this.popupOptions.popupInfo = false;\n      }\n    }\n  },\n  validations: {\n    formRecovery: {\n      email: {\n        email: email,\n        required: required\n      }\n    }\n  }\n};","map":{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+FA;AAEA;EACAA,qBADA;EAEAC,IAFA,kBAEA;IACA;MACAC;QACAC;MADA,CADA;MAIAC,0BAJA;MAKAC;QACAC,kBADA;QAEAC,gBAFA;QAGAC,aAHA;QAIAC;MAJA;IALA;EAYA,CAfA;EAgBAC;IACAC,MADA,kBACAC,UADA,EACA;MACA;QACA;MADA;IAGA,CALA;IAMAC,kBANA,gCAMA;MAAA;;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBACA;;gBADA,KAEA,iBAFA;kBAAA;kBAAA;gBAAA;;gBAGAC;gBAHA;gBAAA;;cAAA;gBAKA;gBACAC,QANA,GAMA;kBACAZ;gBADA,CANA;gBAAA;gBAAA,OAUA,2CAVA;;cAAA;gBAUAa,cAVA;;gBAWA;kBACA;kBACA;kBACA;kBACA;kBACA;gBACA,CANA,MAMA,IACAA,kEADA,EAEA;kBACA;kBACA;kBACA;kBACA;kBACA;gBACA;;cAzBA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IA2BA,CAjCA;IAkCAC,eAlCA,6BAkCA;MACA,IACA,qEADA,EAEA;QACA;QACA;MACA,CALA,MAKA,IACA,qCACA,uCAFA,EAGA;QACA;MACA;IACA;EA9CA,CAhBA;EAgEAC;IACAhB;MACAC;QACAA,YADA;QAEAgB;MAFA;IADA;EADA;AAhEA","names":["name","data","formRecovery","email","isDisabledBtnSubmit","popupOptions","recoveryResult","popupInfo","popupText","popupBtn","methods","status","validation","recoverySubmitForm","console","formData","resultRecovery","goAfterRecovery","validations","required"],"sourceRoot":"src/views","sources":["RecoveryView.vue"],"sourcesContent":["<template>\r\n  <div class=\"container\">\r\n    <div class=\"main-recovery\">\r\n      <div class=\"main-recovery-left\">\r\n        <div class=\"container-recovery\">\r\n          <div class=\"main-recovery-left__title\">ВОССТАНОВЛЕНИЕ ПАРОЛЯ</div>\r\n          <form\r\n            class=\"main-recovery-left__form\"\r\n            @submit.prevent=\"recoverySubmitForm\"\r\n          >\r\n            <div class=\"main-recovery-left__form_name\">\r\n              <label\r\n                class=\"main-recovery-left__form_name_label\"\r\n                for=\"recovery-email\"\r\n                >E-mail <span>*</span>:</label\r\n              >\r\n              <div class=\"main-recovery-left__form_name_input\">\r\n                <input\r\n                  id=\"recovery-email\"\r\n                  type=\"text\"\r\n                  @blur=\"$v.formRecovery.email.$touch()\"\r\n                  v-model.trim=\"formRecovery.email\"\r\n                  placeholder=\"Email\"\r\n                />\r\n                <div\r\n                  class=\"invalid-feed\"\r\n                  v-if=\"\r\n                    $v.formRecovery.email.$error ||\r\n                    ($v.formRecovery.email.$dirty &&\r\n                      !$v.formRecovery.email.required)\r\n                  \"\r\n                >\r\n                  Необходимо указать email\r\n                </div>\r\n                <div class=\"invalid-feed\" v-if=\"!$v.formRecovery.email.email\">\r\n                  Пожалуйста введите Email адрес\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div class=\"main-recovery-left__form_btn\">\r\n              <button\r\n                type=\"submit\"\r\n                :disabled=\"isDisabledBtnSubmit\"\r\n                @click.prevent=\"recoverySubmitForm\"\r\n              >\r\n                Отправить\r\n              </button>\r\n            </div>\r\n          </form>\r\n        </div>\r\n      </div>\r\n      <div class=\"main-recovery-right\">\r\n        <div class=\"main-recovery-right__title\">Авторизация</div>\r\n        <form class=\"main-recovery-right__form\">\r\n          <div class=\"main-recovery-right__form_login\">\r\n            <input\r\n              class=\"main-recovery-right__form_login_input\"\r\n              type=\"text\"\r\n              placeholder=\"Логин\"\r\n            />\r\n          </div>\r\n          <div class=\"main-recovery-right__form_password\">\r\n            <input\r\n              class=\"main-recovery-right__form_password_input\"\r\n              type=\"password\"\r\n              placeholder=\"Пароль\"\r\n            />\r\n          </div>\r\n          <div class=\"main-recovery-right__form_options\">\r\n            <router-link to=\"/recovery\">Забыли пароль?</router-link>\r\n            <router-link to=\"/register\">Регистрация</router-link>\r\n          </div>\r\n          <div class=\"main-recovery-right__form_btn\">\r\n            <button type=\"submit\">Войти</button>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </div>\r\n    <div v-if=\"popupOptions.popupInfo\" class=\"popup-container\">\r\n      <div class=\"popup-information\">\r\n        <div class=\"popup-information__title\">Авторизация</div>\r\n        <div class=\"popup-information__text\">\r\n          {{ popupOptions.popupText }}\r\n        </div>\r\n        <div class=\"popup-information__btn\">\r\n          <button @click=\"goAfterRecovery\">\r\n            {{ popupOptions.popupBtn }}\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { required, email } from \"vuelidate/lib/validators\";\r\n\r\nexport default {\r\n  name: \"recovery-view\",\r\n  data() {\r\n    return {\r\n      formRecovery: {\r\n        email: \"\",\r\n      },\r\n      isDisabledBtnSubmit: false,\r\n      popupOptions: {\r\n        recoveryResult: \"\",\r\n        popupInfo: false,\r\n        popupText: \"\",\r\n        popupBtn: \"\",\r\n      },\r\n    };\r\n  },\r\n  methods: {\r\n    status(validation) {\r\n      return {\r\n        \"is-invalid\": validation.$error,\r\n      };\r\n    },\r\n    async recoverySubmitForm() {\r\n      this.$v.$touch();\r\n      if (this.$v.$invalid) {\r\n        console.log(\"Error\");\r\n      } else {\r\n        this.isDisabledBtnSubmit = true;\r\n        const formData = {\r\n          email: this.formRecovery.email,\r\n        };\r\n\r\n        const resultRecovery = await this.$store.dispatch(\"recovery\", formData);\r\n        if (resultRecovery.message === \"Успешное восстановление пароля\") {\r\n          this.popupOptions.recoveryResult = resultRecovery.message;\r\n          this.popupOptions.popupInfo = true;\r\n          this.popupOptions.popupText = `На вашу почту ${this.formRecovery.email} отправлен новый пароль`;\r\n          this.popupOptions.popupBtn = \"Продолжить\";\r\n          this.isDisabledBtnSubmit = false;\r\n        } else if (\r\n          resultRecovery.message === \"Пользователь с данным email не найден\"\r\n        ) {\r\n          this.popupOptions.recoveryResult = resultRecovery.message;\r\n          this.popupOptions.popupInfo = true;\r\n          this.popupOptions.popupText = `Пользователь с данным ${this.formRecovery.email} не найден`;\r\n          this.popupOptions.popupBtn = \"Попробовать ещё раз\";\r\n          this.isDisabledBtnSubmit = false;\r\n        }\r\n      }\r\n    },\r\n    goAfterRecovery() {\r\n      if (\r\n        this.popupOptions.recoveryResult === \"Успешное восстановление пароля\"\r\n      ) {\r\n        this.$router.push(\"/login\");\r\n        this.popupOptions.popupInfo = false;\r\n      } else if (\r\n        this.popupOptions.recoveryResult ===\r\n        \"Пользователь с данным email не найден\"\r\n      ) {\r\n        this.popupOptions.popupInfo = false;\r\n      }\r\n    },\r\n  },\r\n  validations: {\r\n    formRecovery: {\r\n      email: {\r\n        email,\r\n        required,\r\n      },\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.container {\r\n  max-width: 960px;\r\n  margin: 0 auto;\r\n}\r\n\r\n.popup-container {\r\n  position: fixed;\r\n  left: 0;\r\n  right: 0;\r\n  top: 0;\r\n  bottom: 0;\r\n  z-index: 1000;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  background-color: rgba(0, 0, 0, 0.4);\r\n}\r\n\r\n.popup-information {\r\n  padding: 15px 35px;\r\n  width: 500px;\r\n  height: 300px;\r\n  background-color: #fff;\r\n  border-radius: 5px;\r\n  box-shadow: 0 2px 5px #707070;\r\n}\r\n\r\n.popup-information__title {\r\n  display: flex;\r\n  justify-content: center;\r\n  margin-top: 21px;\r\n  font-size: 32px;\r\n  font-weight: 600;\r\n}\r\n\r\n.popup-information__text {\r\n  margin-top: 25px;\r\n  padding: 0 24px;\r\n  text-align: center;\r\n}\r\n\r\n.popup-information__btn {\r\n  display: flex;\r\n  justify-content: center;\r\n  margin-top: 30px;\r\n}\r\n\r\n.popup-information__btn > button {\r\n  cursor: pointer;\r\n  transition: all 0.3s linear;\r\n  box-sizing: border-box;\r\n  border: none;\r\n  background: #e4e4e4;\r\n  height: 40px;\r\n  font: 100 14px/40px \"Segoe UI\", serif;\r\n  text-transform: uppercase;\r\n  color: #000;\r\n  padding: 0 30px;\r\n  text-decoration: none;\r\n}\r\n\r\n.popup-information__btn > button:hover {\r\n  background-color: #ffc512;\r\n}\r\n\r\n//\r\n.main-recovery {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  margin: 0 0 30px;\r\n  padding: 40px 30px 65px 30px;\r\n}\r\n\r\n.container-recovery {\r\n  max-width: 610px;\r\n}\r\n\r\n.main-recovery-left__title {\r\n  margin: 0 0 25px;\r\n  font: 300 23px/26px \"Segoe UI\";\r\n  color: #929292;\r\n  text-transform: uppercase;\r\n}\r\n\r\n.main-recovery-left__form_name {\r\n  padding: 8px 0;\r\n}\r\n\r\n.main-recovery-left__form_name_label {\r\n  padding: 0 0 3px;\r\n  font: 600 13px \"Segoe UI\", sans-serif;\r\n  color: #252927;\r\n}\r\n\r\n.main-recovery-left__form_name_label > span {\r\n  color: #ff0000;\r\n}\r\n\r\n.main-recovery-left__form_name_input > input {\r\n  outline: none;\r\n  border: 1px solid #e2e2e2;\r\n  background: #fff;\r\n  opacity: 0.75;\r\n  height: 40px;\r\n  width: 200px;\r\n  padding: 0 10px;\r\n  box-sizing: border-box;\r\n  color: #545454;\r\n  font: 13px/40px \"Segoe UI\", sans-serif;\r\n}\r\n\r\n.main-recovery-left__form_name_input > input:focus {\r\n  border: 1px solid #00cccb;\r\n}\r\n\r\n.main-recovery-left__form_btn {\r\n  margin-top: 8px;\r\n}\r\n\r\n.main-recovery-left__form_btn > button {\r\n  transition: all 0.3s linear;\r\n  box-sizing: border-box;\r\n  border: none;\r\n  background: #e4e4e4;\r\n  height: 40px;\r\n  font: 100 14px/40px \"Segoe UI\", serif;\r\n  text-transform: uppercase;\r\n  color: #000;\r\n  padding: 0 30px;\r\n  cursor: pointer;\r\n  text-decoration: none;\r\n}\r\n\r\n.main-recovery-left__form_btn > button:hover {\r\n  background: #ffc512;\r\n}\r\n\r\n.main-recovery-right {\r\n  opacity: 0;\r\n}\r\n\r\n.main-recovery-right__title {\r\n  margin: 0 -30px 0;\r\n  padding: 20px 30px 25px;\r\n  font: 600 18px/20px \"Segoe UI\";\r\n  color: #929292;\r\n}\r\n\r\n.main-recovery-right__form_login {\r\n  padding: 0 0 20px 0;\r\n}\r\n\r\n.main-recovery-right__form_login_input {\r\n  outline: none;\r\n  border: 1px solid #e2e2e2;\r\n  background: #fff;\r\n  opacity: 0.75;\r\n  height: 40px;\r\n  width: 200px;\r\n  padding: 0 10px;\r\n  transition: all 0.3s linear;\r\n  box-sizing: border-box;\r\n  color: #545454;\r\n  font: 13px/40px \"Segoe UI\", sans-serif;\r\n}\r\n\r\n.main-recovery-right__form_login_input:focus {\r\n  border: 1px solid #00cccb;\r\n}\r\n\r\n.main-recovery-right__form_password {\r\n  padding: 0 0 20px 0;\r\n}\r\n\r\n.main-recovery-right__form_password_input {\r\n  outline: none;\r\n  border: 1px solid #e2e2e2;\r\n  background: #fff;\r\n  opacity: 0.75;\r\n  height: 40px;\r\n  width: 200px;\r\n  padding: 0 10px;\r\n  transition: all 0.3s linear;\r\n  box-sizing: border-box;\r\n  color: #545454;\r\n  font: 13px/40px \"Segoe UI\", sans-serif;\r\n}\r\n\r\n.main-recovery-right__form_password_input:focus {\r\n  border: 1px solid #00cccb;\r\n}\r\n\r\n.main-recovery-right__form_options {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n}\r\n\r\n.main-recovery-right__form_options > a {\r\n  font: 12px/1.5em \"Segoe UI\", sans-serif;\r\n  color: #000;\r\n  text-decoration: none;\r\n}\r\n\r\n.main-recovery-right__form_options > a:hover {\r\n  color: #ffc512;\r\n  text-decoration: underline;\r\n}\r\n\r\n.main-recovery-right__form_btn {\r\n  display: flex;\r\n  justify-content: center;\r\n  padding: 15px 20px;\r\n  margin: 20px -30px 0;\r\n}\r\n\r\n.main-recovery-right__form_btn > button {\r\n  cursor: pointer;\r\n  transition: all 0.3s linear;\r\n  box-sizing: border-box;\r\n  border: none;\r\n  background: #e4e4e4;\r\n  height: 40px;\r\n  font: 100 14px/40px \"Segoe UI\", serif;\r\n  text-transform: uppercase;\r\n  color: #000;\r\n  padding: 0 30px;\r\n  text-decoration: none;\r\n}\r\n\r\n.main-recovery-right__form_btn > button:hover {\r\n  background: #ffc512;\r\n}\r\n\r\n.is-invalid {\r\n  font-size: 12px;\r\n  border: 1px solid #dc3545;\r\n}\r\n\r\n.invalid-feed {\r\n  margin-top: 3px;\r\n  font-size: 12px;\r\n  color: #dc3545;\r\n}\r\n\r\n@media (max-width: 926px) {\r\n  .container {\r\n    max-width: 838px;\r\n  }\r\n\r\n  .main-recovery {\r\n    flex-wrap: wrap;\r\n  }\r\n}\r\n\r\n@media (max-width: 844px) {\r\n  .container {\r\n    max-width: 763px;\r\n  }\r\n}\r\n\r\n@media (max-width: 834px) {\r\n  .container {\r\n    max-width: 754.77px;\r\n  }\r\n}\r\n\r\n@media (max-width: 780px) {\r\n  .container {\r\n    max-width: 705.89px;\r\n  }\r\n}\r\n\r\n@media (max-width: 768px) {\r\n  .container {\r\n    max-width: 695px;\r\n  }\r\n}\r\n\r\n@media (max-width: 667px) {\r\n  .container {\r\n    max-width: 603px;\r\n  }\r\n}\r\n\r\n@media (max-width: 568px) {\r\n  .container {\r\n    max-width: 514px;\r\n  }\r\n\r\n  .main-recovery {\r\n    justify-content: center;\r\n  }\r\n\r\n  .main-recovery-right {\r\n    margin-top: 50px;\r\n  }\r\n\r\n  .main-recovery-left__title {\r\n    font: 300 20px/26px \"Segoe UI\";\r\n  }\r\n\r\n  .main-recovery-left__form_name_input > input {\r\n    width: 100%;\r\n  }\r\n\r\n  .main-recovery-left__form_btn {\r\n    display: flex;\r\n    justify-content: center;\r\n  }\r\n\r\n  .main-recovery-right__title {\r\n    display: flex;\r\n    justify-content: center;\r\n  }\r\n\r\n  .main-recovery-left__form_name_input > input {\r\n    font: 12px/40px \"Segoe UI\", sans-serif;\r\n  }\r\n\r\n  .main-recovery-right__form_login_input {\r\n    font: 12px/40px \"Segoe UI\", sans-serif;\r\n  }\r\n\r\n  .main-recovery-right__form_password_input {\r\n    font: 12px/40px \"Segoe UI\", sans-serif;\r\n  }\r\n}\r\n\r\n@media (max-width: 480px) {\r\n  .container {\r\n    max-width: 452.5px;\r\n  }\r\n}\r\n\r\n@media (max-width: 428px) {\r\n  .container {\r\n    max-width: 390px;\r\n  }\r\n\r\n  .main-recovery-left__form_name_input > input {\r\n    font: 12px/40px \"Segoe UI\", sans-serif;\r\n  }\r\n\r\n  .main-recovery-right__form_login_input {\r\n    font: 12px/40px \"Segoe UI\", sans-serif;\r\n  }\r\n\r\n  .main-recovery-right__form_password_input {\r\n    font: 12px/40px \"Segoe UI\", sans-serif;\r\n  }\r\n\r\n  .main-recovery-right__form_options > a {\r\n    font: 11px/1.5em \"Segoe UI\", sans-serif;\r\n  }\r\n}\r\n\r\n@media (max-width: 414px) {\r\n  .container {\r\n    max-width: 380px;\r\n  }\r\n}\r\n\r\n@media (max-width: 390px) {\r\n  .container {\r\n    max-width: 355px;\r\n  }\r\n}\r\n\r\n@media (max-width: 375px) {\r\n  .container-login {\r\n    max-width: 355px;\r\n  }\r\n}\r\n\r\n@media (max-width: 360px) {\r\n  .container {\r\n    max-width: 333px;\r\n  }\r\n\r\n  .main-recovery-left__title {\r\n    font: 300 17px/26px \"Segoe UI\";\r\n  }\r\n\r\n  .main-recovery-right__title {\r\n    font: 600 17px/20px \"Segoe UI\";\r\n  }\r\n}\r\n\r\n@media (max-width: 320px) {\r\n  .container {\r\n    max-width: 300px;\r\n  }\r\n}\r\n</style>"]},"metadata":{},"sourceType":"module"}